# Chrome 新标签页插件

![界面概览](images/003.png)
![自适应布局](images/001.png)
![节气展示](images/002.png)

## 项目概述
这是一个功能丰富的新标签页替代插件，提供日历、便签、天气和节假日倒计时等功能，帮助用户高效管理日常事务。

## 主要功能

### 1. 界面布局
- **左侧导航栏**：快速访问常用网站
- **中间内容区**：显示时钟和便签功能
- **右侧面板**：日历和天气信息
- **右下角**：互动表情图标

### 2. 核心功能
- **实时时钟**：显示当前时间和日期
- **便签系统**：
  - 添加、查看、删除便签
  - 支持标题和内容
  - 自动保存时间戳
  - 展开/收起长列表
  - TODO列表以及完成状态
- **日历功能**：
  - 显示公历和农历日期
  - 节假日标记
  - 上下月份切换
  - 便签关联日历显示
- **天气信息**：
  - 实时天气状况
  - 温度和湿度显示
- **节假日倒计时**：
  - 显示距离主要节假日的天数
  - 自动更新和排序显示

### 3. 特色功能
- **主题切换**：
  - 支持明暗两种主题
  - 随机背景色切换
- **互动表情**：
  - 右下角可爱表情图标
  - 鼠标悬停显示每日趣味文案
  - 点击切换表情状态
  - 根据星期几显示不同心情文案

### 4. 文案系统
每天都有不同的趣味文案，根据工作日和周末显示不同内容：
- **周一至周五**：职场生活相关的幽默文案
- **周末**：轻松愉快的休闲文案
- 每个时段随机显示多条文案之一

## 技术栈
- HTML5/CSS3
- JavaScript ES6+
- Chrome Extension API (Manifest V3)

## 二次开发
1. 修改`index.json`配置导航网站和个人信息
2. 更新`holidays.json`和`holiday-work.json`配置节假日
3. 修改CSS文件调整界面样式

## 常见问题
Q: 如何添加新的导航网站？
A: 编辑`index.json`文件中的`navigation_sites`数组

Q: 如何修改个人昵称？
A: 修改`index.json`中的`person_nickname`字段

## 许可证  
本项目采用 MIT 许可证，保留所有图标的设计版权。

## 项目目录结构
```
demo008/
├── css/               # 样式文件
│   ├── calendar.css   # 日历组件样式
│   └── style.css     # 全局样式
├── js/                # 脚本文件
│   ├── calendar.js    # 日历核心逻辑
│   └── main.js       # 入口文件
├── lib/               # 第三方库
│   └── chinese-lunar.min.js  # 农历转换库
├── images/            # 图片资源
├── holidays.json      # 自定义节假日配置
└── manifest.json      # Chrome插件配置
```

## 节假日配置说明
1. 编辑`holidays.json`文件
2. 按格式添加条目：
```json
{
  "name": "节日名称",
  "type": "lunar/solar",  // 农历/公历
  "month": 数字月份,
  "day": 日期,
  "description": "描述"
}
```
3. 支持同时配置生日提醒（参考现有示例）

## 插件部署步骤
1. 访问 `chrome://extensions`
2. 启用右上角「开发者模式」
3. 点击「加载已解压的扩展程序」
4. 选择本项目的根目录
5. 打开新标签页即可体验

## 已知问题
| 问题现象 | 解决方案 |
|---------|---------|
| 首次加载农历数据较慢 | 允许浏览器完成IndexedDB初始化 |
| 极端日期格式兼容性问题 | 使用YYYY-MM-DD标准格式 |
| 3D模型加载失败 | 检查网络连接和模型文件路径 |


## 提示弹窗功能
## 功能用途
在页面上显示成功或失败的提示信息，弹窗会在 5 秒后自动消失。

## 使用方法
在需要提示的地方调用 `showNotification` 函数，传入提示信息和提示类型。

### 参数说明
- `message`：提示信息，字符串类型。
- `type`：提示类型，字符串类型，可选值为 `'success'` 或 `'error'`。

### 示例代码
```javascript
// 显示成功提示
showNotification('操作成功！', 'success');

// 显示失败提示
showNotification('操作失败，请重试！', 'error');
```
## 确认取消弹窗功能
### 功能用途
在页面上显示一个确认取消弹窗，用户可以选择确认或取消操作，并执行相应的回调函数。

### 使用方法
在您的 JavaScript 代码中调用 `showConfirmDialog` 函数：
```javascript
showConfirmDialog('您确定要执行此操作吗？', 
    () => { 
        // 确认操作的回调函数
        console.log('用户点击了确认'); 
    }, 
    () => { 
        // 取消操作的回调函数
        console.log('用户点击了取消'); 
    }
);
```
### 参数说明

## `index.json` 文件说明
`index.json` 包含了人物昵称、导航网站信息以及一周每天的俏皮文案。

### 数据结构
- `person_nickname`：人物的昵称。
- `navigation_sites`：导航网站列表，每个网站包含 `name`（网站名称）和 `url`（网站地址）。
- `weekly_cute_copies`：一周每天的俏皮文案，键为英文的星期名称，值为对应星期的文案数组。

### 使用方法
你可以在项目代码中读取该文件，根据需要获取人物昵称、导航网站信息或每天的俏皮文案。


## 更新日志

### v1.6.0（2025-04-30）
- **节假日调休自定义功能**：
  - 支持在`holiday-work.json`中配置调休工作日
  - 自动计算并显示调休后的工作日安排
  - 日历中特殊标记调休日和工作日
  ```json
    {
        "year": 2025,
        "month": 4,
        "day": 27,
        "type": "班"
    },
    {
        "year": 2025,
        "month": 4,
        "day": 30,
        "type": "休"
    }
    ```
  
- **个性化设置增强**：
  - 用户昵称自定义（修改`index.json`中的`person_nickname`字段）
  - 每周文案自定义（编辑`index.json`中的`weekly_cute_copies`数组）
  - 网站导航自定义（更新`index.json`中的`navigation_sites`数组）
  
- **界面优化**：
  - 新增调休日特殊图标标识
  - 优化导航栏网站图标加载速度
  - 修复昵称显示过长时的截断问题
  
- **性能改进**：
  - 减少节假日数据计算的CPU占用
  - 优化本地存储读写性能
  - 提升文案切换的动画流畅度


### v1.5.0（2025-04-24）
- 新增便签内容字数统计功能：
  - 实时显示当前便签内容的字数。
  - 字数超过设定阈值时，显示警告提示。
  - 支持自定义字数阈值。
- 优化便签列表显示：
  - 增加列表项的点击事件，方便用户查看和编辑便签内容。
  - 优化列表项的样式，提升用户体验。
- 修复日历显示问题：
  - 修复日历显示不正确的问题，确保正确显示日期和农历信息。
  - 优化日历的布局和样式，提升用户体验。
- 增加主题切换动画效果：
  - 为主题切换添加平滑的过渡效果，提升用户体验。
  - 支持不同主题之间的切换动画。
- 优化性能：
  - 减少不必要的计算和渲染操作，提高页面加载速度。
  - 优化代码结构，提高代码可读性和可维护性。
- 修复已知问题：
  - 修复日历显示错误的问题。
  - 修复主题切换时的样式问题。
  - 修复其他已知问题。
- 文档更新：
  - 更新README.md文件，包含项目简介、功能说明和使用指南。
  - 添加详细的安装和配置说明。
  - 更新版本日志，记录每个版本的变更内容。
- 代码重构：
  - 优化代码结构，提高代码可读性和可维护性。
  - 分离功能模块，提高代码的可扩展性和可重用性。
  - 采用ES6+语法，提高代码质量和性能。
- 测试和调试：
  - 进行功能测试，确保所有功能都能正常工作。
  - 修复已知问题，提高代码稳定性和可靠性。
  - 进行性能测试，优化代码的执行效率。
- 发布新版本：
  - 将更新后的代码发布到GitHub或其他代码托管平台。
  - 更新插件版本号，通知用户更新。
  - 提供下载链接和安装指南，帮助用户快速安装和使用更新后的插件。
- 参与社区讨论：
  - 参与相关社区讨论，收集用户反馈和建议。
  - 根据用户反馈和建议，进行功能改进和优化。
- 持续改进和更新：
  - 定期进行代码审查和测试，确保代码质量和稳定性。
  - 根据用户需求和反馈，进行功能扩展和改进。
  - 持续更新插件文档和示例，帮助用户更好地使用插件。
- 注意事项：
  - 确保在更新插件时，备份重要数据和配置文件。
  - 测试新版本的兼容性，确保在不同的浏览器和设备上都能正常运行。
  - 定期检查插件的更新日志，了解最新的功能和改进内容。
  - 参与社区讨论和反馈，共同改进插件的质量和用户体验。


### v1.4.0（2025-04-20）
- 新增本地文件修改存储功能：
  - 支持对便签内容进行本地文件存储，确保数据在浏览器关闭后不丢失。
  - 实现文件修改监听，当本地文件被修改时，自动同步到插件界面。
  - 提供手动保存和自动保存两种模式，自动保存间隔可配置。
- 界面优化：
  - 新增保存状态提示，让用户清楚知道数据是否已保存。
  - 调整便签编辑区域样式，提升输入体验。
- 性能优化：
  - 对本地文件读写操作进行异步处理，避免阻塞主线程。
  - 增加文件操作缓存机制，减少不必要的文件读写。

### v1.3.0（2024-06-20）
- 新增自定义节假日功能：
  - 支持JSON格式配置文件
  - 农历/公历双模式支持
  - 智能日期冲突检测
  - 前端验证配置格式
- 界面优化：
  - 日历项间距调整（8px → 12px）
  - 新增节假日期动画效果
  - 优化移动端触控响应区域
- 操作优化：
  - 无感新增便签同步日历

### v1.2.0（2024-03-20）
- 节气算法重构：
  - 采用《寿星天文历》计算模型
  - 支持公元前722年至公元2200年
  - 精度±0.5天
- 自适应布局升级：
  - 基于CSS Grid + Flexbox混合布局
  - 新增断点：320px/768px/1024px
  - 使用CSS Containment优化渲染性能
- 高频词统计：
  - 基于TF-IDF算法
  - 支持便签内容实时分析
- 修复日历切换时农历计算异常问题

### v1.1.0（2024-02-15）
- 表情互动系统：
  - SVG路径动画实现
  - 状态机管理表情切换
  - 基于localStorage的状态持久化
- 文案系统升级：
  - 内置200+条UGC文案
  - 基于工作日/节假日的动态过滤
  - 支持Markdown格式渲染
- 便签性能优化：
  - 虚拟滚动技术（100+条流畅展示）
  - IndexedDB本地缓存
  - 防抖自动保存（500ms间隔）
- 主题切换动画：
  - CSS Transition实现
  - 支持HSL色彩空间过渡

### v1.0.0
- 初始版本发布
- 实现基础功能
  - 实时时钟
  - 便签系统
  - 日历功能
  - 天气信息
  - 节假日倒计时
- 支持主题切换
- 提供互动表情